<!DOCTYPE html>
<html lang="en">


<head>
  <!-- ========== Meta Tags ========== -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Agrul - Organic Farm Agriculture Template">

  <!-- ========== Page Title ========== -->
  <title>Rich Farms | Blog</title>

  <!-- ========== Favicon Icon ========== -->
  <link rel="shortcut icon" href="../assets/img/favicon.png" type="image/x-icon">

  <!-- ========== Start Stylesheet ========== -->
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/css/font-awesome.min.css" rel="stylesheet">
  <link href="../assets/css/themify-icons.css" rel="stylesheet">
  <link href="../assets/css/elegant-icons.css" rel="stylesheet">
  <link href="../assets/css/flaticon-set.css" rel="stylesheet">
  <link href="../assets/css/magnific-popup.css" rel="stylesheet">
  <link href="../assets/css/swiper-bundle.min.css" rel="stylesheet">
  <link href="../assets/css/animate.css" rel="stylesheet">
  <link href="../assets/css/validnavs.css" rel="stylesheet">
  <link href="../assets/css/helper.css" rel="stylesheet">
  <link href="../assets/css/shop.css" rel="stylesheet">
  <link href="../assets/css/style.css" rel="stylesheet">
  <link href="../assets/css/unit-test.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <!-- ========== End Stylesheet ========== -->

</head>

<body>

  <!--[if lte IE 9]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif]-->

  <!-- Preloader Start -->
  <div class="se-pre-con"></div>
  <!-- Preloader Ends -->

  <!-- Start Header Top 
    ============================================= -->
  <div class="top-bar-area top-bar-style-one bg-dark text-light">
    <div class="container">
      <div class="row align-center">
        <div class="col-xl-6 col-lg-8 offset-xl-3 pl-30 pl-md-15 pl-xs-15">
          <ul class="item-flex">
            <li>
              <i class="fas fa-map-marker-alt"></i>Dir. of Agric. Building
                Complex, Gwagwalada Area Council Secretariat, FCT.
            </li>
          </ul>
        </div>
        <div class="col-xl-3 col-lg-4 text-end">
          <div class="social">
            <ul>
            <li>
                  <style>
                    .goog-te-gadget-simple {
                        background-color: transparent !important;
                        border: none;
                    }
                    .top-bar-area.top-bar-style-one .social a {
                      border: none;
                      font-size: 12px;
                    }
                  </style>
                  <div id="google_translate_element" class="goog-te-gadget-simple"></div>
                  
                  <script type="text/javascript">
                    function googleTranslateElementInit() {
                      new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                    }
                    </script>
                    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
                </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End Header Top -->

  <header>
    <!-- Start Navigation -->
    <nav
      class="navbar mobile-sidenav navbar-style-one navbar-sticky navbar-default validnavs white navbar-fixed no-background">
      <div class="container">
        <div class="row align-center">
          <!-- Start Header Navigation -->
          <div class="col-xl-2 col-lg-3 col-md-2 col-sm-1 col-1">
            <div class="navbar-header">
              <button
                type="button"
                class="navbar-toggle"
                data-toggle="collapse"
                data-target="#navbar-menu">
                <i class="fa fa-bars"></i>
              </button>
              <a class="navbar-brand" href="/">
                <img src="../assets/img/fam-logo.png" class="logo" alt="Logo" />
              </a>
            </div>
          </div>
          <!-- End Header Navigation -->

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="col-xl-6 offset-xl-1 col-lg-6 col-md-4 col-sm-4 col-4">
            <div class="collapse navbar-collapse" id="navbar-menu">
              <img src="../assets/img/logo.png" alt="Logo" />
              <button
                type="button"
                class="navbar-toggle"
                data-toggle="collapse"
                data-target="#navbar-menu">
                <i class="fa fa-times"></i>
              </button>

              <ul
                class="nav navbar-nav navbar-center"
                data-in="fadeInDown"
                data-out="fadeOutUp">
                <li>
                  <a href="/">Home</a>
                </li>
                <li>
                  <a href="/about-us/">About</a>
                </li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects</a>
                  <ul class="dropdown-menu">
                    <li><a href="../project-app.html">Apples</a></li>
                    <li><a href="../project-landscape.html">Landscape</a></li>
                    <li><a href="../project-livestocks.html">Livestocks</a></li>
                    <li><a href="../project-vegetables.html">Vegetables</a></li>
                    <li>
                      <a href="../project-dehydration.html">Dehydration Machines</a>
                    </li>
                    <li><a href="project-other.html">Other Machines</a></li>
                    <li><a href="../empowerment.html">Empowerment</a></li>
                  </ul>
                </li>
                <li><a href=".#">Blog</a></li>

                <li><a href="../contact-us.html">contact</a></li>
              </ul>
            </div>
          </div>
          <!-- /.navbar-collapse -->

          <div class="col-xl-3 col-lg-3 col-md-6 col-sm-7 col-7">
            <div class="attr-right">
              <!-- Start Atribute Navigation -->
              <div class="attr-nav">
                <ul>
                  <li class="contact">
                    <div class="call">
                      <div class="icon">
                        <i class="fas fa-comments-alt-dollar"></i>
                      </div>
                      <div class="info">
                        <p>Have any Questions?</p>
                        <h5>
                          <a href="mailto:info@crysta.com">info@richfarmsfcta.org</a>
                        </h5>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              <!-- End Atribute Navigation -->
            </div>
          </div>
        </div>
        <!-- Main Nav -->

        <!-- Overlay screen for menu -->
        <div class="overlay-screen"></div>
        <!-- End Overlay screen for menu -->
      </div>
    </nav>
    <!-- End Navigation -->
  </header>
  <!-- End Header -->
  <!-- End Header -->

  <!-- Start Breadcrumb 
    ============================================= -->
  <div class="breadcrumb-area text-center shadow dark bg-fixed text-light" style="background-image: url(../assets/img/banner/3.jpg);">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 offset-lg-2">
          <h1>Latest Blog</h1>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li><a href="/"><i class="fas fa-home"></i> Home</a></li>
              <li class="active">Blog</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>
  <!-- End Breadcrumb -->

  <!-- Start Blog
    ============================================= -->
  <div class="blog-area full-blog default-padding">
    <div class="container">
      <div class="blog-items">
        <div class="row">
          <div class="blog-content col-xl-8 col-lg-7 col-md-12 pr-35 pr-md-15 pl-md-15 pr-xs-15 pl-xs-15">
            <div class="blog-item-box">
              <style>
                .next-btn {
                      margin-left: 90%; 
                      top: 50%;
                      background-color: #ffffff67;
                      position:absolute; 
                      border-radius: 100px;
                      text-align: center; 
                      display: inline-grid; 
                      align-items: center; 
                      width: 50px; 
                      height: 50px;
                      color: #000;
                  }
                  .next-btn:hover {
                      color: #fff;
                  }
              </style>
              <?php
              include('../config/con.php'); // Include your database connection

              // Set the number of posts per page
              $posts_per_page = 5;

              // Get the current page from the URL, default to 1 if not set
              $page = isset($_GET['page']) ? intval($_GET['page']) : 1;

              // Calculate the offset for the SQL query
              $offset = ($page - 1) * $posts_per_page;

              // Query to get the total number of posts
              $total_sql = "SELECT COUNT(*) FROM post";
              $total_result = $conn->query($total_sql);
              $total_posts = $total_result->fetch_row()[0];

              // Calculate the total number of pages
              $total_pages = ceil($total_posts / $posts_per_page);

              // Query to get all posts with their first image
              $sql = "SELECT p.postid, p.title, p.content, p.created_at, pi.image_path
                                    FROM post p
                                    LEFT JOIN (
                                        SELECT postid, MIN(imageid) as imageid, image_path 
                                        FROM post_images 
                                        GROUP BY postid 
                                    ) pi ON p.postid = pi.postid
                                    ORDER BY p.created_at DESC
                                    LIMIT $posts_per_page OFFSET $offset";

              $result = $conn->query($sql);

              // Display posts with their first image
              if ($result->num_rows > 0) {

                while ($row = $result->fetch_assoc()) {
                  $title = $row['title'];
                  $content = $row['content'];
                  $postimg = "<img src='../uploads/" . $row['image_path'] . "' alt='Post Image'>";

                  $timestamp = strtotime($row['created_at']);
                  $day = date('d', $timestamp);  // Day (e.g., 23)
                  $month = date('F', $timestamp); // Full month name (e.g., September)
                  $year = date('Y', $timestamp);  // Year (e.g., 2024)
              ?>
                  <!-- Single Item -->
                  <div class="item">
                    <div class="thumb">
                      <a href="single-post.php?postid=<?php echo $row['postid']; ?>">
                        <?php
                        if ($row['image_path']) {
                          echo $postimg;
                        } else {
                          echo "<p> No image Available</p>";
                        }
                        ?>
                        <div>
                        <div class="next-btn"><strong>>></strong></div>
                        </div>
                      </a>
                      <div class="date"><strong><?php echo $day; ?></strong> <span><?php echo $month . ", " . $year; ?></span></div>
                    </div>
                    <div class="info">
                      <div class="meta">
                        <ul>
                          <li>
                            <a href="#"><i class="fas fa-user-circle"></i> Admin</a>
                          </li>
                        </ul>
                      </div>
                      <h2 class="title">
                        <a href="single-post.php?postid=<?php echo $row['postid']; ?>">
                          <?php echo $title; ?>
                        </a>
                      </h2>
                      <p>
                        <?php

                        //echo $content;

                        // Truncate content to 50 words
                        $content = explode(' ', $row['content']); // Split content into words
                        if (count($content) > 50) {
                          $content = array_slice($content, 0, 50); // Take the first 50 words
                          $content = implode(' ', $content); // Join them back into a string
                          $content .= '...'; // Add ellipsis to indicate truncated text
                        } else {
                          $content = $row['content']; // If content has less than 50 words, show full content
                        }

                        echo "<p>" . $content . "</p>";

                        // Add a "Read More" link to view the full post
                        echo "<a href='single-post.php?postid=" . $row['postid'] . "'>Read More</a>";

                        ?>
                      </p>
                    </div>
                  </div>
                  <!-- Single Item -->

              <?php

                }
              } else {
                $msg = "No posts found.";
              }

              $conn->close();
              ?>


            </div>

            <!-- Pagination -->

            <div class="row">
              <div class="col-md-12 pagi-area text-center">
                <nav aria-label="navigation">
                  <ul class="pagination">
                    <li class="page-item">

                      <i class="fas fa-angle-double-left"></i>
                      <?php
                      // Pagination controls
                      if ($page > 1) {
                        echo $page_start = "<a class='page-link' href='?page=" . ($page - 1) . "'>Previous</a>";
                      }
                      ?>
                      </a>
                    </li>
                    <li class="page-item">
                      <?php

                      if ($page < $total_pages) {
                        echo "<a class='page-link' href='?page=" . ($page + 1) . "'>Next</a>";
                      }
                      ?>
                      <i class="fas fa-angle-double-right"></i>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>

          </div>


          <!-- Start Sidebar -->
          <div class="sidebar col-xl-4 col-lg-5 col-md-12 mt-md-50 mt-xs-50">
            <?php include('aside.php'); ?>
          </div>
          <!-- End Start Sidebar -->
        </div>
      </div>
    </div>
  </div>
  <!-- End Blog -->

  <!-- Start Footer 
    ============================================= -->
  <footer
    class="bg-dark text-light"
    style="background-image: url(../assets/img/shape/brush-down.png)">
    <div class="container">
      <!-- Start Footer Bottom -->
      <div class="footer-bottom">
        <div class="row">
          <div class="col-lg-6">
            <p>
              &copy; Copyright
              <script>
                document.write(new Date().getFullYear());
              </script>
              . All Rights Reserved.
            </p>
          </div>
          <div class="col-lg-6 text-end">
            <ul>
              <li>
                <a href="../about-us">About us</a>
              </li>
              <li>
                <a href="../contact-us.html">Support</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- End Footer Bottom -->
    </div>
    <div class="shape-right-bottom">
      <img src="../assets/img/shape/10.png" alt="Image Not Found" />
    </div>
    <div class="shape-left-bottom">
      <img src="../assets/img/shape/11.png" alt="Image Not Found" />
    </div>
  </footer>
  <!-- End Footer -->

  <!-- jQuery Frameworks
    ============================================= -->
  <script src="../assets/js/jquery-3.6.0.min.js"></script>
  <script src="../assets/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/jquery.appear.js"></script>
  <script src="../assets/js/jquery.easing.min.js"></script>
  <script src="../assets/js/jquery.magnific-popup.min.js"></script>
  <script src="../assets/js/modernizr.custom.13711.js"></script>
  <script src="../assets/js/swiper-bundle.min.js"></script>
  <script src="../assets/js/wow.min.js"></script>
  <script src="../assets/js/progress-bar.min.js"></script>
  <script src="../assets/js/circle-progress.js"></script>
  <script src="../assets/js/isotope.pkgd.min.js"></script>
  <script src="../assets/js/imagesloaded.pkgd.min.js"></script>
  <script src="../assets/js/jquery.nice-select.min.js"></script>
  <script src="../assets/js/count-to.js"></script>
  <script src="../assets/js/jquery.scrolla.min.js"></script>
  <script src="../assets/js/YTPlayer.min.js"></script>
  <script src="../assets/js/TweenMax.min.js"></script>
  <script src="../assets/js/validnavs.js"></script>
  <script src="../assets/js/main.js"></script>

</body>

</html>